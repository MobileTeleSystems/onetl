# 0.13.0 (2025-02-24) { #0.13.0 }

üéâ 3 –≥–æ–¥–∞ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞ 0.1.0 üéâ

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Python 3.13. ([#298](https://github.com/MobileTeleSystems/onetl/pull/298))

- –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `FileConnection.walk` –∏ `FileConnection.list_dir`. ([#327](https://github.com/MobileTeleSystems/onetl/pull/327))

  –†–∞–Ω–µ–µ `limits.stops_at(path) == True` –≤—ã–ø–æ–ª–Ω—è–ª–æ—Å—å –∫–∞–∫ "–≤–µ—Ä–Ω—É—Ç—å —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è", –∏ –º–æ–≥–ª–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—é –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –ª–∏–º–∏—Ç–∞. –¢–µ–ø–µ—Ä—å —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ".

- –ò–∑–º–µ–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è `FileDFWriter.Options(if_exists=...)` —Å `error` –Ω–∞ `append`, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–º –∫–ª–∞—Å—Å–∞–º `.Options()` –≤–Ω—É—Ç—Ä–∏ onETL. ([#343](https://github.com/MobileTeleSystems/onetl/pull/343))

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–ª–∞—Å—Å–∞ HWM `FileModifiedTimeHWM` (—Å–º. [etl-entities 2.5.0](https://github.com/MobileTeleSystems/etl-entities/releases/tag/2.5.0)):

  ```python
  from etl_entitites.hwm import FileModifiedTimeHWM
  from onetl.file import FileDownloader
  from onetl.strategy import IncrementalStrategy

  downloader = FileDownloader(
      ...,
      hwm=FileModifiedTimeHWM(name="somename"),
  )

  with IncrementalStrategy():
      downloader.run()
  ```

- –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å —Ñ–∏–ª—å—Ç—Ä–∞ `FileSizeRange(min=..., max=...)`. ([#325](https://github.com/MobileTeleSystems/onetl/pull/325))

  –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `FileDownloader` / `FileMover` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤:

  ```python
  from onetl.file import FileDownloader
  from onetl.file.filter import FileSizeRange

  downloader = FileDownloader(
      ...,
      filters=[FileSizeRange(min="10KiB", max="1GiB")],
  )
  ```

- –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å –ª–∏–º–∏—Ç–∞ `TotalFilesSize(...)`. ([#326](https://github.com/MobileTeleSystems/onetl/pull/326))

  –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `FileDownloader` / `FileMover` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

  ```python
  from datetime import datetime, timedelta
  from onetl.file import FileDownloader
  from onetl.file.limit import TotalFilesSize

  downloader = FileDownloader(
      ...,
      limits=[TotalFilesSize("1GiB")],
  )
  ```

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ñ–∏–ª—å—Ç—Ä —Ñ–∞–π–ª–æ–≤ `FileModifiedTime(since=..., until=...)`. ([#330](https://github.com/MobileTeleSystems/onetl/pull/330))

  –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `FileDownloader` / `FileMover` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è:

  ```python
  from datetime import datetime, timedelta
  from onetl.file import FileDownloader
  from onetl.file.filter import FileModifiedTime

  downloader = FileDownloader(
      ...,
      filters=[FileModifiedTime(before=datetime.now() - timedelta(hours=1))],
  )
  ```

- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `SparkS3.get_exclude_packages()` –∏ `Kafka.get_exclude_packages()`. ([#341](https://github.com/MobileTeleSystems/onetl/pull/341))

  –ò—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏—Ö—Å—è —ç—Ç–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞–º, –∏–ª–∏ —Ç–∞–∫–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é Spark/PySpark:

  ```python
  from onetl.connection import SparkS3, Kafka

  maven_packages = [
      *SparkS3.get_packages(spark_version="3.5.4"),
      *Kafka.get_packages(spark_version="3.5.4"),
  ]
  exclude_packages = SparkS3.get_exclude_packages() + Kafka.get_exclude_packages()
  spark = (
      SparkSession.builder.appName("spark_app_onetl_demo")
      .config("spark.jars.packages", ",".join(maven_packages))
      .config("spark.jars.excludes", ",".join(exclude_packages))
      .getOrCreate()
  )
  ```

## –£–ª—É—á—à–µ–Ω–∏—è

- –í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, –æ—Ç–∫—Ä—ã—Ç—ã–µ `JDBC.fetch(...)`, `JDBC.execute(...)` –∏–ª–∏ `JDBC.check()`, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. ([#334](https://github.com/MobileTeleSystems/onetl/pull/334))

  –†–∞–Ω–µ–µ Spark —Å–µ—Å—Å–∏—è —Å `master=local[3]` —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞ –¥–æ 5 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: –æ–¥–Ω–æ –¥–ª—è `JDBC.check()`, –¥—Ä—É–≥–æ–µ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ Spark —Å –ë–î –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü, –∏ –ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Spark executor. –¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 4 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ `JDBC.check()` –Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

  –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –°–£–ë–î, —Ç–∞–∫–∏—Ö –∫–∞–∫ Postgres –∏–ª–∏ Greenplum, –≥–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ, –∏ –ª–∏–º–∏—Ç –æ–±—ã—á–Ω–æ –¥–æ–≤–æ–ª—å–Ω–æ –Ω–∏–∑–∫–∏–π.

- –ù–∞—Å—Ç—Ä–æ–µ–Ω `ApplicationName` (client info) –¥–ª—è Clickhouse, MongoDB, MSSQL, MySQL –∏ Oracle. ([#339](https://github.com/MobileTeleSystems/onetl/pull/339), [#248](https://github.com/MobileTeleSystems/onetl/pull/248))

  –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç `ApplicationName` –¥–ª—è Greenplum, Postgres, Kafka –∏ SparkS3.
  –¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç `ApplicationName`: `${spark.applicationId} ${spark.appName} onETL/${onetl.version} Spark/${spark.version}`

  –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–µ `ApplicationName`, - —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Teradata –∏ FileConnection.

- –¢–µ–ø–µ—Ä—å `DB.check()` –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥—Ä–∞–π–≤–µ—Ä–µ Spark, –Ω–æ –∏ –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —ç–∫–∑–µ–∫—É—Ç–æ—Ä–æ–≤ Spark. ([#346](https://github.com/MobileTeleSystems/onetl/pull/346))

  –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ —Ö–æ—Å—Ç –¥—Ä–∞–π–≤–µ—Ä–∞ Spark –∏–º–µ–µ—Ç —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ü–µ–ª–µ–≤–æ–π –ë–î, –∞ —ç–∫–∑–µ–∫—É—Ç–æ—Ä Spark - –Ω–µ—Ç.

!!! note

    –¢–µ–ø–µ—Ä—å ``Greenplum.check()`` —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Ö –∂–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ –∏ ``DBReader(connection=greenplum)``:

    ```sql
    -- yes, "writable" for reading data from GP, it's not a mistake
    ALTER USER username CREATEEXTTABLE(type = 'writable', protocol = 'gpfdist');

    -- for both reading and writing to GP
    -- ALTER USER username CREATEEXTTABLE(type = 'readable', protocol = 'gpfdist') CREATEEXTTABLE(type = 'writable', protocol = 'gpfdist');
    ```

    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –≤–∞—à–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ Greenplum –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–∏ –ø—Ä–∞–≤–∞.


## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ Hive Metastore –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `DBWriter`. ([#329](https://github.com/MobileTeleSystems/onetl/pull/329))

  –†–∞–Ω–µ–µ —ç—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫:

  ```python
  try:
      spark.sql(f"SELECT * FROM {table}")
      table_exists = True
  except Exception:
      table_exists = False
  ```

  –ï—Å–ª–∏ Hive Metastore –±—ã–ª –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º, —Å—á–∏—Ç–∞–ª–æ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –µ–µ –ø–æ–ª–Ω–æ–º—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é, –≤–º–µ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–¥–µ–ª–æ–≤.

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ onETL –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã PostgreSQL –∏–ª–∏ Greenplum, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö *pgbouncer* —Å `pool_mode=transaction`. ([#336](https://github.com/MobileTeleSystems/onetl/pull/336))

  –†–∞–Ω–µ–µ `Postgres.check()` –æ—Ç–∫—Ä—ã–≤–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è, pgbouncer –∏–∑–º–µ–Ω—è–ª –≤–µ—Å—å —Ç–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å "—á—Ç–µ–Ω–∏—è-–∑–∞–ø–∏—Å–∏" –Ω–∞ "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è", –∏ –∫–æ–≥–¥–∞ `DBWriter.run(df)` –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫–∞–ª–∏ –æ—à–∏–±–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫:

  ```
  org.postgresql.util.PSQLException: ERROR: cannot execute INSERT in a read-only transaction
  org.postgresql.util.PSQLException: ERROR: cannot execute TRUNCATE TABLE in a read-only transaction
  ```

  –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—Ö–æ–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—É—Ç–µ–º –ø–µ—Ä–µ–¥–∞—á–∏ `readOnly=True` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã JDBC –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è, —á—Ç–æ–±—ã pgbouncer –º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è" –∏ "—á—Ç–µ–Ω–∏—è-–∑–∞–ø–∏—Å–∏".

  –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è onETL 0.13.x –∏–ª–∏ –≤—ã—à–µ —Ç–∞ –∂–µ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è, –µ—Å–ª–∏ pgbouncer –≤—Å–µ –µ—â–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è" –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –¥–ª—è DBWriter. –ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è" –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ "—á—Ç–µ–Ω–∏—è-–∑–∞–ø–∏—Å–∏":

  ```python
  postgres.execute("BEGIN READ WRITE;")  # <-- add this line
  DBWriter(...).run()
  ```

  –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –ø—É–ª–µ pgbouncer –±—ã–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –∏–∑ "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è" –≤ "—á—Ç–µ–Ω–∏–µ-–∑–∞–ø–∏—Å—å", –∏ –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, —ç—Ç—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.

  –°–º. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥—Ä–∞–π–≤–µ—Ä–∞ Postgres JDBC](https://jdbc.postgresql.org/documentation/use/).

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `MSSQL.fetch(...)` –∏ `MySQL.fetch(...)`, –æ—Ç–∫—Ä—ã–≤–∞–≤—à–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ "—á—Ç–µ–Ω–∏—è-–∑–∞–ø–∏—Å–∏" –≤–º–µ—Å—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è". ([#337](https://github.com/MobileTeleSystems/onetl/pull/337))

  –¢–µ–ø–µ—Ä—å:
    - `MSSQL.fetch(...)` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å `ApplicationIntent=ReadOnly`.
    - `MySQL.fetch(...)` –≤—ã–∑—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä `SET SESSION TRANSACTION READ ONLY`.

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ `FileDownloader` –∏ `FileMover`. ([#338](https://github.com/MobileTeleSystems/onetl/pull/338)) –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —ç—Ç–æ–≥–æ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –º–µ—Ç–æ–¥–µ –≤–µ–¥–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞, –Ω–æ –ø–æ–¥–∫–ª–∞—Å—Å—ã `FileFilter` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å Grenplum. ([#342](https://github.com/MobileTeleSystems/onetl/pull/342))

  –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ Spark —Å `.master("local[5]")` –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –¥–æ 6 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å Greenplum (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–∫—É—Ç–æ—Ä–æ–≤ Spark + 1 –¥–ª—è –¥—Ä–∞–π–≤–µ—Ä–∞), –Ω–æ onETL –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ *—è–¥–µ—Ä CPU* –Ω–∞ —Ö–æ—Å—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

  –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –ª–æ–∂–Ω–æ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π Greenplum —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–æ, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–∫—É—Ç–æ—Ä–æ–≤ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 30.

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞, –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB –ø—ã—Ç–∞–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ `authSource`. ([#347](https://github.com/MobileTeleSystems/onetl/pull/347))

  –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç.–µ. `admin`. –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ onETL –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

  ```python
  from onetl.connection import MongoDB

  mongodb = MongoDB(
      ...,
      database="mydb",
      extra={
          "authSource": "admin",
      },
  )
  ```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è `etl-entities` —Ç–µ–ø–µ—Ä—å [2.5.0](https://github.com/MobileTeleSystems/etl-entities/releases/tag/2.5.0). ([#331](https://github.com/MobileTeleSystems/onetl/pull/331))
- –î–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã/–¥—Ä–∞–π–≤–µ—Ä—ã –ë–î: ([#345](https://github.com/MobileTeleSystems/onetl/pull/345))
    - Clickhouse `0.6.5` ‚Üí `0.7.2`
    - MongoDB `10.4.0` ‚Üí `10.4.1`
    - MySQL `9.0.0` ‚Üí `9.2.0`
    - Oracle `23.5.0.24.07` ‚Üí `23.7.0.25.01`
    - Postgres `42.7.4` ‚Üí `42.7.5`

## –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- –ë–æ–ª—å—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã  –Ω–∞ –≤–∫–ª–∞–¥–∫–∏. ([#344](https://github.com/MobileTeleSystems/onetl/pull/344))
